<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <style>
        /* Your styles from the provided code go here */

        /* Additional styles from the new code */
        button.format.light-mode {
            background-color: #0088cc; /* Format button background color in light mode */
            color: #fff; /* Format button text color in light mode */
        }

        /* Additional light mode styles */
        body.light-mode {
            background-color: #f2f2f2;
            color: #333;
        }

        #calculator.light-mode {
            background-color: #fff;
            border: 1px solid #ccc;
        }

        #display.light-mode {
            background-color: #f9f9f9;
            color: #333;
        }

        button.light-mode {
            background-color: #f9f9f9;
            color: #333;
            border: 1px solid #ccc;
        }

        button.operator.light-mode {
            background-color: #ff9900;
            color: #fff;
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Your HTML content from the provided code goes here -->

    <script>
        // Your JavaScript code from the provided code goes here

        // Additional JavaScript code for the new functionalities
        function toggleSign() {
            try {
                let inputValue = display.value;

                // Check if the display includes the format, and remove it
                if (display.value.includes(currentFormat.toUpperCase() + ":")) {
                    inputValue = inputValue.slice(currentFormat.length + 2);
                }

                // Toggle the sign of the expression
                let result = eval(inputValue) * -1;

                // Convert the result to the original format
                switch (currentFormat) {
                    case 'hex':
                        result = '0x' + result.toString(16).toUpperCase();
                        break;
                    case 'bin':
                        result = '0b' + result.toString(2);
                        break;
                    // 'dec' format does not need conversion
                }

                // Display the result with the current format
                display.value = currentFormat.toUpperCase() + ": " + result;
            } catch (error) {
                display.value = 'Error';
            }
        }

        function nroot() {
            try {
                let inputValue = display.value;

                // Check if the display includes the format, and remove it
                if (display.value.includes(currentFormat.toUpperCase() + ":")) {
                    inputValue = inputValue.slice(currentFormat.length + 2);
                }

                // Prompt the user for the root value
                let rootValue = prompt("Enter the root value:");

                // Calculate the nth root of the expression
                let result = Math.pow(eval(inputValue), 1 / parseFloat(rootValue));

                // Convert the result to the original format
                switch (currentFormat) {
                    case 'hex':
                        result = '0x' + result.toString(16).toUpperCase();
                        break;
                    case 'bin':
                        result = '0b' + result.toString(2);
                        break;
                    // 'dec' format does not need conversion
                }

                // Display the result with the current format
                display.value = currentFormat.toUpperCase() + ": " + result;
            } catch (error) {
                display.value = 'Error';
            }
        }
    </script>
</body>
</html>
